<!DOCTYPE html>
<html lang="fi">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Kirjastoesseet #3 “Käytännön harjoituksia”, Pilvi Porkola | Mad House Publication, Volume 4</title>
  <link rel="stylesheet" href="../normalize.css">
  <link rel="stylesheet" href="../common.css">
  <link rel="stylesheet" href="../patterns.css">
  <link rel="stylesheet" href="kirjastoesseet.css">
</head>

<body>
  <div class="content">
    <div class="top-bar">
      <div>
        <a href="..">&larr; Takaisin / Back</a>
        <span class="title">Pilvi Porkola <i>Kirjastoesseet #3 “Käytännön harjoituksia”</i></span>
        <button hx-get="kirjastoesseet-info.html" hx-target="aside" hx-push-url="false">Bio & Info</button>
      </div>
    </div>

    <div class="pilvi-container desktop">
      <img alt="" src="kirjastoessee.png" />
    </div>
    <div class="pilvi-container phone">
      <img alt="" src="kirjastoessee-vino.png" />
    </div>
    <div class="audio-container pattern-JkZ-B">
      <div>
        <span>Kuuntele / Listen:</span>
        <audio src="kirjastoessee.webm" preload="auto" controls="controls">
          <a href="kirjastoesseet.mp3"> Lataa äänitiedosto / Download audio </a>
        </audio>
      </div>
    </div>
  </div>

  <aside></aside>
  
  <script src="../vendor/hyperscript.js"></script>
  <script type="text/hyperscript">

    behavior Modal

	init
		add [@role="dialog"]
		set title to the first <h1,h2,h3/> in me
		if (title is not empty) then
			
			if title.id is empty  then 
				set title.id to "modal-title" 
			end

			set the @aria-labelledby to the title's id
		end

		focus() the first <[tabindex]/> in me

	on closeModal(nextPage) from window	
		if #modal is not empty then 
			add .closing to #modal
			settle
			remove #modal
		end

		if nextPage is not empty then 
			set the window's location to nextPage
		end
	
	on click(target)
		if the target's className is "modal-underlay" then
			trigger closeModal
		end

	on keydown[key=="Escape"]
		if #modal is not empty then 
			trigger closeModal
			halt the event
		end

	on keydown[key=="Tab"]
		set focusedElement to the first <:focus/>

		if event.shiftKey
			focus() the previous <[tabindex]/> from focusedElement with wrapping
		else
			focus() the next <[tabindex]/> from focusedElement with wrapping
		end

		halt the event

  </script>
  <script src="../vendor/htmx.js"></script>
</body>

</html>